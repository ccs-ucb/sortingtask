function log_data(data){
	data["event_time"] = Date.now()
	console.log(data)
	data_log.push(data)
}

function get_image_path(filename){
	return "static/images/" + filename;
}

function finish_experiment(){
	save(data_log,"Sortingtask_" + Date.now() + ".json")	
}

function save(data,filename){
	var blob = new Blob([JSON.stringify(data)], {type: 'text/csv'});
	var elem = window.document.createElement('a');
	elem.href = window.URL.createObjectURL(blob);
	elem.download = filename;        
	document.body.appendChild(elem);
	elem.click();
	document.body.removeChild(elem);
}

$(document).ready(function(){
	advice = [{"parent_id": 31, "advice_text": "I started on the left and worked my way to the right. If an image swapped, I moved it as far to the left as it would go. This worked well but, I may have made too many moves. ", "replay_data": {"rank": [4, 6, 5, 1, 2, 3], "img_urls": ["helicopter.jpg", "piano.jpg", "mountain.jpg", "fireworks.jpg", "money.jpg", "field.jpg"], "sequence": [{"indices": [0, 1], "success": false}, {"indices": [1, 2], "success": true}, {"indices": [1, 0], "success": false}, {"indices": [2, 3], "success": true}, {"indices": [2, 1], "success": true}, {"indices": [1, 0], "success": true}, {"indices": [3, 4], "success": true}, {"indices": [3, 2], "success": true}, {"indices": [2, 1], "success": true}, {"indices": [1, 0], "success": false}, {"indices": [4, 5], "success": true}, {"indices": [4, 3], "success": true}, {"indices": [3, 2], "success": true}, {"indices": [2, 1], "success": false}]}, "bonus": 0.9789947538932928}, {"parent_id": 59, "advice_text": "I selected the pair on the far right and then systematically worked my way to the left, testing each new pair that resulted.", "replay_data": {"rank": [2, 5, 4, 6, 1, 3], "img_urls": ["books.jpg", "envelope.jpg", "compass.jpg", "salad.jpg", "keys.jpg", "candle.jpg"], "sequence": [{"indices": [4, 5], "success": false}, {"indices": [3, 4], "success": true}, {"indices": [4, 5], "success": true}, {"indices": [2, 3], "success": true}, {"indices": [3, 4], "success": true}, {"indices": [4, 5], "success": false}, {"indices": [2, 3], "success": false}, {"indices": [1, 2], "success": true}, {"indices": [2, 3], "success": true}, {"indices": [3, 4], "success": true}, {"indices": [4, 5], "success": false}, {"indices": [0, 1], "success": true}, {"indices": [1, 2], "success": false}]}, "bonus": 1.0949257064391928}, {"parent_id": 263, "advice_text": "I compared each image to all the images to the left of it, starting with the 2nd image. So I compared 2nd to 1st, and if they moved I then compared the 3rd to 2nd. If these did not move, I left everything from 3-1 in place. Then I began with 4th to 3rd, 3rd to 2nd, etc. If they did not move, I stopped comparing them to the ones to the left and moved on to the place in line I had left off. ", "replay_data": {"rank": [2, 4, 6, 3, 1, 5], "img_urls": ["compass.jpg", "spices.jpg", "fireworks.jpg", "moon.jpg", "sprouts.jpg", "headphones.jpg"], "sequence": [{"indices": [0, 1], "success": false}, {"indices": [1, 2], "success": false}, {"indices": [2, 3], "success": true}, {"indices": [2, 1], "success": true}, {"indices": [1, 0], "success": false}, {"indices": [4, 3], "success": true}, {"indices": [3, 2], "success": true}, {"indices": [2, 1], "success": true}, {"indices": [1, 0], "success": true}, {"indices": [5, 4], "success": true}, {"indices": [4, 3], "success": false}]}, "bonus": 0.9626042485167735}, {"parent_id": 330, "advice_text": "First click is the second image, compare it to the first. You're comparing the second image to the first. Move down the line to the third image and compare it to the second. If it moves, compare that image to the first one. Keep doing this technique as you move to the right, always comparing the item to the one to it's immediate left. If it doesn't switch, move on to the next. Works every time! Get rich brother!!!!", "replay_data": {"rank": [1, 6, 2, 5, 3, 4], "img_urls": ["cliffs.jpg", "parachute.jpg", "sprouts.jpg", "paintbrush.jpg", "chess.jpg", "fish.jpg"], "sequence": [{"indices": [1, 0], "success": false}, {"indices": [2, 1], "success": true}, {"indices": [1, 0], "success": false}, {"indices": [3, 2], "success": true}, {"indices": [2, 1], "success": false}, {"indices": [4, 3], "success": true}, {"indices": [3, 2], "success": true}, {"indices": [2, 1], "success": false}, {"indices": [5, 4], "success": true}, {"indices": [4, 3], "success": true}, {"indices": [3, 2], "success": false}]}, "bonus": 0.9801985532505013}, {"parent_id": 354, "advice_text": "Click the second image and compare it to the first image. If the second image changes to the first then move down to the third image and compare it to the second.If it moves down to the second image compare the second image to the first. If it stays in the same spot then move down to the fourth image and compare to the third. Keep moving down the line til all images align.", "replay_data": {"rank": [3, 2, 5, 4, 6, 1], "img_urls": ["taxi.jpg", "stairs.jpg", "sprouts.jpg", "helicopter.jpg", "puffin.jpg", "skiing.jpg"], "sequence": [{"indices": [1, 0], "success": true}, {"indices": [2, 1], "success": false}, {"indices": [3, 2], "success": true}, {"indices": [2, 1], "success": false}, {"indices": [4, 3], "success": false}, {"indices": [5, 4], "success": true}, {"indices": [4, 3], "success": true}, {"indices": [3, 2], "success": true}, {"indices": [2, 1], "success": true}, {"indices": [1, 0], "success": true}, {"indices": [5, 4], "success": false}]}, "bonus": 0.9637054976949457}, {"parent_id": 373, "advice_text": "I compared consecutive pairs and when one moved, I followed that one as far to the beginning of the sequence until it was in the right place.  ", "replay_data": {"rank": [5, 2, 3, 1, 4, 6], "img_urls": ["lamp.jpg", "parachute.jpg", "road.jpg", "swan.jpg", "cards.jpg", "goat.jpg"], "sequence": [{"indices": [0, 1], "success": true}, {"indices": [1, 2], "success": true}, {"indices": [2, 1], "success": false}, {"indices": [2, 3], "success": true}, {"indices": [2, 1], "success": true}, {"indices": [1, 0], "success": true}, {"indices": [3, 4], "success": true}, {"indices": [3, 2], "success": false}, {"indices": [4, 5], "success": false}]}, "bonus": 1.023060486522025}, {"parent_id": 388, "advice_text": "You start with the second picture and click on the first one and continue that pattern down the line of pictures until they all align. So, if the first picture and second picture don't switch move onto the fourth then third picture until everything lines up correctly.", "replay_data": {"rank": [4, 2, 6, 5, 3, 1], "img_urls": ["house.jpg", "toothpaste.jpg", "taxi.jpg", "money.jpg", "tulips.jpg", "faucet.jpg"], "sequence": [{"indices": [1, 0], "success": true}, {"indices": [2, 1], "success": false}, {"indices": [3, 2], "success": true}, {"indices": [2, 1], "success": false}, {"indices": [4, 3], "success": true}, {"indices": [3, 2], "success": true}, {"indices": [2, 1], "success": true}, {"indices": [1, 0], "success": false}, {"indices": [4, 3], "success": false}, {"indices": [5, 4], "success": true}, {"indices": [4, 3], "success": true}, {"indices": [3, 2], "success": true}, {"indices": [2, 1], "success": true}, {"indices": [1, 0], "success": true}]}, "bonus": 1.1704648526077097}, {"parent_id": 426, "advice_text": "Start with the leftmost card.  This becomes your target card.  Try to swap it with the card to its right.  If they can't be swapped, then this card is currently sorted.  In this case, the target card becomes the card to its right and you repeat the previous steps.  If they swap, keep trying to move the card that was on the right as far left as possible.  Once it can no longer be swapped with a card to its left, or it reaches the leftmost position, return to the initial card.  Again, try to swap it with the card on the right.  Repeat this for all cards until you reach the last two cards.  They will either swap or not, and you will be done.", "replay_data": {"rank": [3, 1, 2, 5, 4, 6], "img_urls": ["moon.jpg", "bridge.jpg", "parrot.jpg", "icetea.jpg", "diamond.jpg", "watch.jpg"], "sequence": [{"indices": [0, 1], "success": true}, {"indices": [1, 2], "success": true}, {"indices": [1, 0], "success": false}, {"indices": [2, 3], "success": false}, {"indices": [3, 4], "success": true}, {"indices": [3, 2], "success": false}, {"indices": [4, 5], "success": false}]}, "bonus": 0.983125890093922}]
	initialize_task(6,9,3,"IS",advice,start_experiment)
});